# AWS

## `[AWS]`
* [`입문, JSCODE`](https://www.youtube.com/watch?v=Jd7xdvwY_VQ&list=PLtUgHNmvcs6qr33RT-UiguSsCr_2Gq0S3&index=2)
* [`중급, JSCODE`](https://www.youtube.com/watch?v=I80axlyvMAk&list=PLtUgHNmvcs6oIMb6vhz7rApHu7KeWzsQZ&index=3)
<br><br>

### [배포]
* 다른 사용자들이 인터넷을 통해서 사용할 수 있게 만든다.
* 로컬 호스트가 아닌 IP나 도메인 같은 고유 주소를 받는다.
<br><br>

### [EC2]
* Elastic Compute Cloude
* 컴퓨터를 빌려서 원격으로 접속해서 사용하는 서비스.
* 하나의 컴퓨터를 통째로 빌릴 수 있다.
* 백엔드 서버를 배포해야 할때 보통 EC2를 사용한다.
* 보안 그룹
    * 인바운드 트래픽: 외부에서 EC2로 보내는 트래픽
    * 아웃바운드 트래픽: EC2에서 외부로 보내는 트래픽
    * 인바운드와 아웃바운드 트래픽에 대한 각각의 규칙을 만든다.
    * IP 범위와 포트를 설정할 수 있다.
    * IP: 특정 컴퓨터의 주소
    * 포트: 컴퓨터에 실행되고 있는 특정 프로그램의 주소
    * 브라우저는 기본적으로 80번 포트를 사용한다.
    * 0 ~ 1023번 까지는 보통 역할이 정해져있다.
* EBS
    * Elastic Block Storage
    * 스토리지, 볼륨, EC2의 저장공간
* 접속 방법
    * 퍼블릭 IP(IPv4) 주소로 접속할 수 있다.
    * SSH 키 등록해서도 접속할 수 있다.
* 탄력적 IP
    * 고정 IP를 할당할 수 있는 것.
    * 기본적으로 임시 IP를 쓰므로 인스턴스 껐다 키면 IP가 변경된다.
* 배포하기
    * 백엔드 서버 git clone 으로 프로젝트 가져오기
    * 관련 라이브러리 다 설치
    * 민감한 파일들은 EC2 CLI에서 vi로 설치
    * 백엔드 서버 실행
<br><br>

### [RDS]
* Relational Database Service
* RDB(MySQL, MariaDB 등)을 AWS에서 빌려서 사용하는 서비스.
* 자동 백업, 모니터링 등 다양한 편리한 기능을 제공한다.
* EC2에 직접 MySQL 설치
    * RDS를 사용하지 않는 방법이다.
    * 비용 절감은 되지만, 백엔드 서버와 MySQL이 같이 죽는다.
    * RDS에서 제공하는 부가 기능을 사용할 수 없다.
* 보안 그룹
    * EC2로 이동해서 RDS 보안 그룹을 생성해 설정한다.
    * 접근하는 IP를 제한할 수 있다.
* 파라미터 그룹
    * MySQL의 설정값을 관리하는 것과 같다.
    * (권장) UTF-8, 타임존
* CLI로 사용하거나 DBeaver에 연결.
<br><br>

### [S3와 CloudFront]
* S3: 파일 저장하는 서비스, 정적 웹 사이트를 퍼블릭으로 배포하는 서비스.
* CloudFront: 컨텐츠를 빠르게 전송하게 해주는 서비스.
    * CDN, Content Delivery Network 중 하나
    * 가까운 임시 저장소 서버에 컨텐츠를 미리 복사해둔다.
    * 컨텐츠를 전송 받는 성능을 향상시키기 위해 사용한다.
    * HTTPS와 보안 강화를 적용하기 위해서 사용한다.
    * Netlify, Vercel 도 다른 회사의 동일한 서비스이다.
* 유저가 직접 S3에 접근하는 것이 아니라 CloudFront를 통해서 접근한다.
* 웹 사이트 배포 과정
    * S3 버킷 생성
    * 퍼블릭 액세스 차단 풀기
    * 버킷 정책 작성
    * index.html 만들어서 버킷에 업로드
    * 버킷 설정 가장 아래, 정적 웹 사이트 호스팅 편집, 활성화
    * 인덱스 문서에 index.html 넣기
    * CloudFront 들어가서 배포 생성
    * 도메인 연결, HTTPS 적용 설정
<br><br>

### [VPC]
* 가상의 네트워크 (PC들이 통신하는) 공간.
    * VPC는 모눈 종이처럼 생긴 분할된 땅이라고 생각하면 이해하기 쉽다.
    * 각 분할 땅마다 IP 주소를 가지고 있고 이걸 리소스에 할당할 수 있다.
    * VPC를 만들 때 크기를 정할 수 있다.
    * CIDR 표기법을 사용해서 IP 주소의 범위로 설정한다.
* 핵심 기능은 보안이다.
    * 외부에서 직접 접근할 수 없는 독립적인 환경을 구성할 수 있다.
    * 보안적으로 안전하게 리소스 (EC2, RDS 등)에 접근할 수 있다.
    * 리소스를 생성할 때 VPC 위에 생성해야 한다.
* 퍼플릭 IP vs 프라이빗 IP
    * 퍼플릭 IP: 외부 인터넷을 통해 접근할 수 있는 공식적인 주소.
    * 프라이빗 IP: 외부 연결x, 내부 네트워크에만 사용되는 주소.
    * 프라이빗 IP는 동일한 네트워크 환경에서만 통신이 가능하다.
    * 동일한 네트워크 = 동일 공유기, 동일 VPC
    * 프라이빗 IP는 네트워크 환경 마다 독립적으로 사용할 수 있다. (주소 중복 가능)
* 퍼플릭 IP 통신하기
    * 터미널에서 curl 명령어 `curl -X GET http://[PUBLIC_IP]:8080`
    * 포스트맨 `HTTP GET 메서드`
    * EC2 인스턴스 CLI `curl -X GET http://[OTHER_PUBLIC_IP]:8080`
* 프라이빗 IP 통신하기
    * VPC 엔드포인트 AWS 통신 `aws s3 ls ...`
    * 동일 VPC의 EC2 인스턴스 CLI `curl -X GET http://[PRIVATE_IP]:8080`
* 퍼블릭 서브넷, 프라이빗 서브넷 생성
* 인터넷 게이트웨이 생성
* 라우팅 테이블 생성
* NAT 게이트웨이 생성
<br><br>

### [아키텍처 다이어그램]
* `draw.io`: 다이어그램 드로잉 툴
* 아키텍처를 그림으로 표현하고 이해할 수 있어야한다.
<br><br>

### [용어 정리]
* 엔드 포인트: 특정 리소스(ex. 서버, DB)에 접근할 수 있는 URL.
* CIDR 표기법: IP 주소의 범위를 나타내는 표기 방법.
* 서브넷: 하나의 큰 네트워크를 작은 네트워크 단위로 나눈 것.
    * VPC와 같은 큰 땅의 일부분을 서브넷으로 묶을 수 있다.
    * VPC (큰 분할된 땅), 서브넷 (작은 분할된 땅), IP 주소 (분할 땅 1개)
    * 외부에서 접근 가능한 퍼블릿 서브넷, 접근 불가능한 프라이빗 서브넷 처럼 사용한다.
* 인터넷 게이트웨이: VPC와 외부 인터넷 간에 양방향으로 통신할 수 있는 출입구.
* 라우팅 테이블: 트래픽을 어디로 전송해야 하는지 경로를 알려주는 테이블.
    * VPC 내부의 EC2 인스턴스에게 게이트웨이가 어디에 있는지 알려주는 장치이다.
* NAT 게이트웨이: 서브넷에서 외부 인터넷으로 단방향으로 통신할 수 있는 출입구.
    * 외부 인터넷에서 서브넷으로 접근은 불가능하게 차단한다.
    * 외부의 침입으로 부터 보안성이 강하다.
* Bastion Host: 외부 인터넷에서 내부 리소스에 접근할 때 보안을 위해 거치는 컴퓨터.
    * Bastion: 성을 보호하기 위해 돌출된 부분.
<br><br>